// Privacy Pro subscription-related pixel definitions for macOS
{
    "m_mac_privacy-pro_keychain_manager_data_added_to_backlog": {
        "description": "Fired when Privacy Pro keychain manager adds data to the backlog because keychain is unavailable (direct distribution)",
        "owners": ["federicocappelli"],
        "triggers": ["other"],
        "suffixes": ["first_daily_count"],
        "parameters": [
            "appVersion",
            "pixelSource",
            {
                "key": "source",
                "description": "The app component that generated the pixel, like MainApp, SysExt, VPNApp or DBP",
                "type": "string"
            }
        ]
    },
    "m_mac_privacy-pro_keychain_manager_deallocated_with_backlog": {
        "description": "Fired when Privacy Pro keychain manager is deallocated while still having pending data in the backlog (direct distribution)",
        "owners": ["federicocappelli"],
        "triggers": ["other"],
        "suffixes": ["first_daily_count"],
        "parameters": [
            "appVersion",
            "pixelSource",
            {
                "key": "source",
                "description": "The app component that generated the pixel, like MainApp, SysExt, VPNApp or DBP",
                "type": "string"
            }
        ]
    },
    "m_mac_privacy-pro_keychain_manager_data_wrote_from_backlog": {
        "description": "Fired when Privacy Pro keychain manager successfully writes data from the backlog to keychain (direct distribution)",
        "owners": ["federicocappelli"],
        "triggers": ["other"],
        "suffixes": ["first_daily_count"],
        "parameters": [
            "appVersion",
            "pixelSource",
            {
                "key": "source",
                "description": "The app component that generated the pixel, like MainApp, SysExt, VPNApp or DBP",
                "type": "string"
            }
        ]
    },
    "m_mac_privacy-pro_keychain_manager_failed_to_write_data_from_backlog": {
        "description": "Fired when Privacy Pro keychain manager fails to write data from the backlog to keychain (direct distribution)",
        "owners": ["federicocappelli"],
        "triggers": ["other"],
        "suffixes": ["first_daily_count"],
        "parameters": [
            "appVersion",
            "pixelSource",
            {
                "key": "source",
                "description": "The app component that generated the pixel, like MainApp, SysExt, VPNApp or DBP",
                "type": "string"
            }
        ]
    },
    // Tier Options Pixels - Direct Distribution
    "m_mac_direct_subscription_tier-options_requested": {
        "description": "Fired when subscription tier options are requested from the purchase page (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_direct_subscription_tier-options_success": {
        "description": "Fired when subscription tier options are successfully retrieved (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_direct_subscription_tier-options_failure": {
        "description": "Fired when subscription tier options fail to be retrieved (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": [
            "appVersion",
            "pixelSource",
            {
                "key": "d",
                "type": "string",
                "description": "Error Type: com.duckduckgo.subscription.StripePurchaseFlowError"
            },
            {
                "key": "e",
                "type": "string",
                "description": "Error Code: 12700, 12701, 12702, 12703, 12704, 12705, 12706"
            },
            {
                "key": "ud",
                "type": "string",
                "description": "Error Type: com.duckduckgo.subscription.SubscriptionEndpointServiceError"
            },
            {
                "key": "ue",
                "type": "string",
                "description": "Error Code: 12300, 12301, 12302"
            }
        ]
    },
    "m_mac_direct_subscription_tier-options_unexpected-pro-tier": {
        "description": "Fired when Pro tier products are unexpectedly returned when they should be filtered out (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },

    // Tier Options Pixels - App Store Distribution
    "m_mac_store_subscription_tier-options_requested": {
        "description": "Fired when subscription tier options are requested from the purchase page (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_store_subscription_tier-options_success": {
        "description": "Fired when subscription tier options are successfully retrieved (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_store_subscription_tier-options_failure": {
        "description": "Fired when subscription tier options fail to be retrieved (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": [
            "appVersion",
            "pixelSource",
            {
                "key": "d",
                "type": "string",
                "description": "Error Type: com.duckduckgo.subscription.StripePurchaseFlowError"
            },
            {
                "key": "e",
                "type": "string",
                "description": "Error Code: 12700, 12701, 12702, 12703, 12704, 12705, 12706"
            },
            {
                "key": "ud",
                "type": "string",
                "description": "Error Type: com.duckduckgo.subscription.SubscriptionEndpointServiceError"
            },
            {
                "key": "ue",
                "type": "string",
                "description": "Error Code: 12300, 12301, 12302"
            }
        ]
    },
    "m_mac_store_subscription_tier-options_unexpected-pro-tier": {
        "description": "Fired when Pro tier products are unexpectedly returned when they should be filtered out (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["other"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },

<<<<<<< Updated upstream:macOS/PixelDefinitions/pixels/subscription.json5
=======
    // Plan Change Click Pixels - Direct Distribution
    "m_mac_direct_subscription_settings_view-all-plans_click": {
        "description": "Fired when the user clicks 'View All Plans' button in subscription settings (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["user_submitted"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_direct_subscription_settings_upgrade_click": {
        "description": "Fired when the user clicks 'Upgrade' button in subscription settings (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["user_submitted"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_direct_subscription_settings_cancel-pending-downgrade_click": {
        "description": "Fired when the user clicks 'Cancel Downgrade' button in subscription settings to cancel a pending plan downgrade (direct distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["user_submitted"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },

    // Plan Change Click Pixels - App Store Distribution
    "m_mac_store_subscription_settings_view-all-plans_click": {
        "description": "Fired when the user clicks 'View All Plans' button in subscription settings (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["user_submitted"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_store_subscription_settings_upgrade_click": {
        "description": "Fired when the user clicks 'Upgrade' button in subscription settings (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["user_submitted"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_store_subscription_settings_cancel-pending-downgrade_click": {
        "description": "Fired when the user clicks 'Cancel Downgrade' button in subscription settings to cancel a pending plan downgrade (App Store distribution)",
        "owners": ["SabrinaTardio"],
        "triggers": ["user_submitted"],
        "suffixes": [],
        "parameters": ["appVersion", "pixelSource"]
    },

>>>>>>> Stashed changes:macOS/PixelDefinitions/pixels/definitions/subscription.json5
    "m_mac_store_privacy-pro_app_subscription-purchase_failure": {
        "description": "The error encountered when an App Store subscription purchase fails",
        "owners": ["federicocappelli"],
        "triggers": ["other"],
        "suffixes": [
            {
                "description": "The type of purchase failure",
                "enum": ["store", "backend", "account-creation", "other"]
            },
            "legacy_daily_count"
        ],
        "parameters": ["appVersion", "pixelSource", "errorCode", "errorDomain", "underlyingErrorCode", "underlyingErrorDomain"]
    },
    "m_mac_direct_privacy-pro_app_subscription-purchase_failure": {
        "description": "The error encountered when a Stripe subscription purchase fails",
        "owners": ["federicocappelli"],
        "triggers": ["other"],
        "suffixes": [
            {
                "description": "The type of purchase failure",
                "enum": ["store", "backend", "account-creation", "other"]
            },
            "legacy_daily_count"
        ],
        "parameters": ["appVersion", "pixelSource", "errorCode", "errorDomain", "underlyingErrorCode", "underlyingErrorDomain"]
    },
    // Defined in https://app.asana.com/1/137249556945/task/1210959493759232
    "m_mac_wide_subscription_purchase": {
        "description": "Wide pixel sent at the end of a subscription purchase flow",
        "owners": ["samsymons"],
        "triggers": ["other"],
        "suffixes": ["daily_standard"],
        "parameters": [
            "appVersion",
            "wideEventAppName",
            "wideEventAppVersion",
            "wideEventPlatform",
            "wideEventType",
            "wideEventSampleRate",
            "wideEventFeatureStatus",
            "wideEventErrorDomain",
            "wideEventErrorCode",
            "wideEventUnderlyingErrorDomain",
            "wideEventUnderlyingErrorCode",
            {
                "key": "feature.name",
                "type": "string",
                "description": "Feature identifier for this wide pixel",
                "enum": ["subscription-purchase"]
            },
            {
                "key": "feature.status_reason",
                "type": "string",
                "description": "Reason string for the current status, when applicable - currently applied to UNKNOWN status pixels",
                "enum": ["partial_data", "missing_entitlements", "missing_entitlements_delayed_activation"]
            },
            {
                "key": "feature.data.ext.purchase_platform",
                "type": "string",
                "description": "Platform used to complete the purchase",
                "enum": ["app_store", "stripe"]
            },
            {
                "key": "feature.data.ext.failing_step",
                "type": "string",
                "description": "The step at which the flow failed, when applicable",
                "enum": ["FLOW_START", "ACCOUNT_CREATE", "ACCOUNT_PAYMENT", "ACCOUNT_ACTIVATION"]
            },
            {
                "key": "feature.data.ext.subscription_identifier",
                "type": "string",
                "description": "Subscription product identifier from the payment provider, e.g. ddg.privacy.pro.monthly.renews.us"
            },
            {
                "key": "feature.data.ext.free_trial_eligible",
                "type": "string",
                "description": "Whether a free trial was available",
                "enum": ["true", "false"]
            },
            {
                "key": "feature.data.ext.account_creation_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for account creation step (ms)",
                "enum": [1000, 5000, 10000, 30000, 60000, 300000, 600000]
            },
            {
                "key": "feature.data.ext.account_payment_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for purchase completion step (ms)",
                "enum": [1000, 5000, 10000, 30000, 60000, 300000, 600000]
            },
            {
                "key": "feature.data.ext.account_activation_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for account activation step (ms)",
                "enum": [1000, 5000, 10000, 30000, 60000, 300000, 600000]
            },
            {
                "key": "app.native_apps_experiments",
                "description": "The list of enrolled Native Apps experiments in a comma-separated string, e.g. experiment1.cohortX,experiment2.cohortY",
                "type": "string"
            },
            {
                "key": "context.name",
                "type": "string",
                "description": "Context name for the flow"
            }
        ]
    },
    // Defined in https://app.asana.com/1/137249556945/task/1211354430557014
    "m_mac_wide_subscription_restore": {
        "description": "Wide pixel sent at the end of a subscription restore flow",
        "owners": ["hanyutang-sandra"],
        "triggers": ["other"],
        "suffixes": ["daily_standard"],
        "parameters": [
            "appVersion",
            "wideEventAppName",
            "wideEventAppVersion",
            "wideEventPlatform",
            "wideEventType",
            "wideEventSampleRate",
            "wideEventFeatureStatus",
            "wideEventErrorDomain",
            "wideEventErrorCode",
            "wideEventUnderlyingErrorDomain",
            "wideEventUnderlyingErrorCode",
            {
                "key": "feature.name",
                "type": "string",
                "description": "Feature identifier for this wide pixel",
                "enum": ["subscription-restore"]
            },
            {
                "key": "feature.status_reason",
                "type": "string",
                "description": "Reason string for the current status, when applicable - currently applied to UNKNOWN status pixels",
                "enum": ["partial_data", "timeout"]
            },
            {
                "key": "feature.data.ext.restore_platform",
                "type": "string",
                "description": "Platform used to complete the restore",
                "enum": ["apple_account", "email_address", "purchase_background_task"]
            },
            {
                "key": "feature.data.ext.email_address_restore_last_url",
                "type": "string",
                "description": "The url at which the email flow, when applicable",
                "enum": [
                    "activation_flow",
                    "activation_flow_email",
                    "activation_flow_activate_email",
                    "activation_flow_activate_email_otp",
                    "activation_flow_success"
                ]
            },
            {
                "key": "feature.data.ext.apple_account_restore_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for restore using apple account (in ms)",
                "enum": [1000, 5000, 10000, 30000, 60000, 300000, 600000]
            },
            {
                "key": "feature.data.ext.email_address_restore_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for restore using email address (in ms)",
                "enum": [-1, 10000, 30000, 60000, 300000, 600000, 900000]
            },
            {
                "key": "app.native_apps_experiments",
                "description": "The list of enrolled Native Apps experiments in a comma-separated string, e.g. experiment1.cohortX,experiment2.cohortY",
                "type": "string"
            },
            {
                "key": "context.name",
                "type": "string",
                "description": "Context name for the flow",
                "enum": [
                    "funnel_appsettings_macos",
                    "funnel_purchaseoffer_macos",
                    "funnel_prepurchasecheck_macos",
                    "funnel_onpurchasecheck_multiple"
                ]
            }
        ]
    },
    // Defined in https://app.asana.com/1/137249556945/project/72649045549333/task/1211468169482228?focus=true
    "m_mac_wide_auth_v2_token_refresh": {
        "description": "Wide pixel sent after an AuthV2 token refresh",
        "owners": ["samsymons"],
        "triggers": ["other"],
        "suffixes": ["daily_standard"],
        "parameters": [
            "appVersion",
            "wideEventAppName",
            "wideEventAppVersion",
            "wideEventPlatform",
            "wideEventType",
            "wideEventSampleRate",
            "wideEventFeatureStatus",
            "wideEventErrorDomain",
            "wideEventErrorCode",
            "wideEventUnderlyingErrorDomain",
            "wideEventUnderlyingErrorCode",
            {
                "key": "feature.name",
                "type": "string",
                "description": "Feature identifier for this wide event",
                "enum": ["authv2-token-refresh"]
            },
            {
                "key": "feature.status_reason",
                "type": "string",
                "description": "Reason string for the current status, when applicable - currently applied to UNKNOWN status events",
                "enum": ["partial_data"]
            },
            {
                "key": "feature.data.ext.refresh_trigger",
                "type": "string",
                "description": "String representing what caused the token refresh to begin",
                "enum": ["backend", "client", "token_adoption"]
            },
            {
                "key": "feature.data.ext.failing_step",
                "type": "string",
                "description": "The step at which the flow failed, when applicable",
                "enum": ["token_read", "refresh_access_token", "fetch_jwks", "verify_access_token", "verify_refresh_token", "token_write"]
            },
            {
                "key": "feature.data.ext.refresh_token_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for token refresh step (ms)",
                "enum": [1000, 5000, 10000, 30000, 60000, 300000, 600000]
            },
            {
                "key": "feature.data.ext.fetch_jwks_latency_ms_bucketed",
                "type": "integer",
                "description": "Bucketed latency for fetch JWKS step (ms)",
                "enum": [1000, 5000, 10000, 30000, 60000, 300000, 600000]
            },
            {
                "key": "app.native_apps_experiments",
                "description": "The list of enrolled Native Apps experiments in a comma-separated string, e.g. experiment1.cohortX,experiment2.cohortY",
                "type": "string"
            }
        ]
    },
    // Defined in https://app.asana.com/1/137249556945/project/72649045549333/task/1211468169482228?focus=true
    "m_mac_wide_auth_v2_token_adoption": {
        "description": "Wide pixel sent after an AuthV2 token adoption event",
        "owners": ["samsymons"],
        "triggers": ["other"],
        "suffixes": ["daily_standard"],
        "parameters": [
            "appVersion",
            "wideEventAppName",
            "wideEventAppVersion",
            "wideEventPlatform",
            "wideEventType",
            "wideEventSampleRate",
            "wideEventFeatureStatus",
            "wideEventErrorDomain",
            "wideEventErrorCode",
            "wideEventUnderlyingErrorDomain",
            "wideEventUnderlyingErrorCode",
            {
                "key": "feature.name",
                "type": "string",
                "description": "Feature identifier for this wide event",
                "enum": ["authv2-token-adoption"]
            },
            {
                "key": "feature.status_reason",
                "type": "string",
                "description": "Reason string for the current status, when applicable - currently applied to UNKNOWN status events",
                "enum": ["partial_data"]
            },
            {
                "key": "feature.data.ext.failing_step",
                "type": "string",
                "description": "The step at which the flow failed, when applicable",
                "enum": ["token_refresh"]
            }
        ]
    },
    "m_mac_store_privacy-pro_new_tab_page_next_steps_card_clicked": {
        "description": "Fired when user clicks the subscription Next Steps card on the New Tab Page (App Store distribution)",
        "owners": ["jozsef-vesza"],
        "triggers": ["other"],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_direct_privacy-pro_new_tab_page_next_steps_card_clicked": {
        "description": "Fired when user clicks the subscription Next Steps card on the New Tab Page (direct distribution)",
        "owners": ["jozsef-vesza"],
        "triggers": ["other"],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_store_privacy-pro_new_tab_page_next_steps_card_dismissed": {
        "description": "Fired when user dismisses the subscription Next Steps card on the New Tab Page (App Store distribution)",
        "owners": ["jozsef-vesza"],
        "triggers": ["other"],
        "parameters": ["appVersion", "pixelSource"]
    },
    "m_mac_direct_privacy-pro_new_tab_page_next_steps_card_dismissed": {
        "description": "Fired when user dismisses the subscription Next Steps card on the New Tab Page (direct distribution)",
        "owners": ["jozsef-vesza"],
        "triggers": ["other"],
        "parameters": ["appVersion", "pixelSource"]
    }
}
